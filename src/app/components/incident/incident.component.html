<!-- Page permettant de lister les paramètres -->
<mat-card class="card">
  <app-menu></app-menu>
  <mat-card-header>
    <div class="card-header">
      <mat-card-title> Incidents </mat-card-title>
      <mat-card-title>
        <button class="button-add" mat-mini-fab (click)="openDialog()" type="button" matTooltipPosition="left" matTooltip="Ajouter un ticket d'incident" style="background-color:#0288d1;">
          <mat-icon>add</mat-icon>
        </button>
      </mat-card-title>
    </div>
  </mat-card-header>
  <mat-divider></mat-divider>
  <mat-card-content class="card-content">
    <mat-list>
      <mat-list-item *ngFor="let row of data" [ngClass]="{'my-class': row.state===true }">
          <p matLine><span style="font-size: 20px;">Titre : {{row.title}}</span><span style="float: right;font-size: 14px;">Date de création : {{row.date_creation | date :'shortDate'}}</span></p>
          <p matLine><span>Description : {{row.description}}</span></p>
          <p matLine>
            <span>Type : {{row.type}} &nbsp; | &nbsp; </span>
            <span>Technicien : {{row.technician}} &nbsp; | &nbsp; </span>
            <span>Employé : {{row.employe}} &nbsp; | &nbsp; </span>
            <span>Site : {{row.site}}</span>
          </p>
          <p matLine><span *ngIf="row.state==false">Etat : En cours</span><span *ngIf="row.state==true">Etat : Résolu</span><span style="float: right;">Date de résolution : {{row.date_resolution | date :'shortDate'}}</span></p>
          <p style="margin-left:15px;width:150px;margin-top:15px;">
            <span *ngIf="!row.state">
              <button mat-icon-button (click)="validate(row)"><mat-icon color=primary>done_outline</mat-icon></button>
              <button mat-icon-button (click)="update(row)"><mat-icon color=primary>edit</mat-icon></button>
              <button mat-icon-button (click)="openDialogForDelete(row._id)"><mat-icon style="color:#f44336;" matListIcon>delete</mat-icon></button>            
            </span>         
          </p>
      </mat-list-item>
    </mat-list>
    </mat-card-content>
</mat-card>
